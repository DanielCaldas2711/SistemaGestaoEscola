<div id="confirmPopup" class="popup-overlay d-none" tabindex="-1">
    <div class="popup-box animate__animated animate__fadeInDown" role="dialog" aria-modal="true" aria-labelledby="popupTitle">
        <h4 id="popupTitle">Confirmação</h4>
        <p id="popupMessage">Tens a certeza que queres prosseguir?</p>
        <div class="popup-buttons">
            <button id="confirmYes" class="btn btn-danger">Sim</button>
            <button id="confirmNo" class="btn btn-secondary">Não</button>
        </div>
    </div>
</div>

<style>
    .popup-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        background-color: rgba(0, 0, 0, 0.6);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 1055;
    }

    .popup-box {
        background: white;
        border-radius: 12px;
        padding: 24px 32px;
        text-align: center;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        max-width: 400px;
        width: 100%;
    }

    .popup-buttons {
        margin-top: 20px;
        display: flex;
        justify-content: center;
        gap: 10px;
    }
</style>

<link href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" rel="stylesheet" />

<script>
    window.showConfirmPopup = function (options) {
        const popup = document.getElementById('confirmPopup');
        const titleEl = document.getElementById('popupTitle');
        const messageEl = document.getElementById('popupMessage');
        const yesBtn = document.getElementById('confirmYes');
        const noBtn = document.getElementById('confirmNo');

        titleEl.textContent = options.title || 'Confirmação';
        messageEl.textContent = options.message || 'Tens a certeza que queres prosseguir?';

        popup.classList.remove('d-none');
        noBtn.focus();

        const close = () => {
            popup.classList.add('d-none');
            yesBtn.onclick = null;
            noBtn.onclick = null;
        };

        yesBtn.onclick = () => {
            close();
            if (typeof options.onConfirm === 'function') {
                options.onConfirm();
            }
        };

        noBtn.onclick = close;
    };
</script>
